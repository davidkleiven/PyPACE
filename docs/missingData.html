

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>missingData module &mdash; PyPACE 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PyPACE 1.0 documentation" href="index.html"/> 

  
  <script src="static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PyPACE
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">missingData module</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PyPACE</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>missingData module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="sources/missingData.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-missingData">
<span id="missingdata-module"></span><h1>missingData module<a class="headerlink" href="#module-missingData" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="missingData.Constraint">
<em class="property">class </em><code class="descclassname">missingData.</code><code class="descname">Constraint</code><span class="sig-paren">(</span><em>missingData</em>, <em>weight=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#Constraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.Constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Generic constraint</p>
<dl class="method">
<dt id="missingData.Constraint.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#Constraint.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.Constraint.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the constraint to img. All child classes has to implement this function.</p>
<dl class="docutils">
<dt>img: ndarray</dt>
<dd>An array representing the object.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="missingData.FourierConstraint">
<em class="property">class </em><code class="descclassname">missingData.</code><code class="descname">FourierConstraint</code><span class="sig-paren">(</span><em>missingData</em>, <em>weight=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#FourierConstraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.FourierConstraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#missingData.Constraint" title="missingData.Constraint"><code class="xref py py-class docutils literal"><span class="pre">missingData.Constraint</span></code></a></p>
<p>Fourier constraint. Intensity belonging to the region not being measured is left unchanged, and
intensitis in the region of measured data is set to zero.</p>
<dl class="method">
<dt id="missingData.FourierConstraint.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#FourierConstraint.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.FourierConstraint.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the Fourier constraint.
Intensities inside the region of measured data is set to zero, and intensities outside this region
is left unchanged</p>
<dl class="docutils">
<dt>img: ndarray</dt>
<dd>The object of which the constraint is applied</dd>
<dt>Returns: ndarray</dt>
<dd>The real part of the inverse Fourier transform after the constraint in Fourier domain has been applied</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="missingData.MissingDataAnalyzer">
<em class="property">class </em><code class="descclassname">missingData.</code><code class="descname">MissingDataAnalyzer</code><span class="sig-paren">(</span><em>mask</em>, <em>support</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/2/library/functions.html#object" title="(in Python v2.7)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Analyse and can identify structures that only scatters into the region
of missing data</p>
<dl class="method">
<dt id="missingData.MissingDataAnalyzer.computeConstrainedPower">
<code class="descname">computeConstrainedPower</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.computeConstrainedPower"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.computeConstrainedPower" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the fraction of constrained power by the realspace constraint and the Fourier constraint</p>
<dl class="docutils">
<dt>img:</dt>
<dd>The 3D object</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.fA">
<code class="descname">fA</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.fA"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.fA" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fA function from <a class="reference external" href="https://en.wikipedia.org/wiki/Difference-map_algorithm">https://en.wikipedia.org/wiki/Difference-map_algorithm</a></p>
<dl class="docutils">
<dt>x:</dt>
<dd>List of the duplicates of the object</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.fB">
<code class="descname">fB</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.fB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.fB" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the fB function in <a class="reference external" href="https://en.wikipedia.org/wiki/Difference-map_algorithm">https://en.wikipedia.org/wiki/Difference-map_algorithm</a></p>
<dl class="docutils">
<dt>x:</dt>
<dd>List of the duplicates of the object</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.getImg">
<code class="descname">getImg</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.getImg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.getImg" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the resulting image</p>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.getMaxVal">
<code class="descname">getMaxVal</code><span class="sig-paren">(</span><em>allimgs</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.getMaxVal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.getMaxVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the maximum value in of all the duplicates</p>
<dl class="docutils">
<dt>allimgs:</dt>
<dd>List of all the duplicates</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.plot"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots slices in both real space and Fourier space of the image</p>
<dl class="docutils">
<dt>x:</dt>
<dd>One representation of the object (note not a list of duplicates as in many of the other functions)</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.plotProgression">
<code class="descname">plotProgression</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.plotProgression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.plotProgression" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots the error on each iteration step</p>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.projectA">
<code class="descname">projectA</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.projectA"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.projectA" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply each the constraints to the corresponding duplicate</p>
<dl class="docutils">
<dt>x:</dt>
<dd>List of all the duplicates of the object</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.projectB">
<code class="descname">projectB</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.projectB"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.projectB" title="Permalink to this definition">¶</a></dt>
<dd><p>Average all the duplicates of the object</p>
<dl class="docutils">
<dt>x:</dt>
<dd>List of all the duplicates of the object</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.solve">
<code class="descname">solve</code><span class="sig-paren">(</span><em>constraints</em>, <em>niter=1000</em>, <em>relerror=0.0</em>, <em>show=False</em>, <em>initial=None</em>, <em>zeroLimit=0.0</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.solve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Find a function that satisfy all the constraints given in the constraints list</p>
<dl class="docutils">
<dt>constraints: list</dt>
<dd>List of constraints that the solution should satisfy</dd>
<dt>nIter: int</dt>
<dd>Maximum number of iterations</dd>
<dt>relerror: float</dt>
<dd>If the relative error between the objects produced when applying the different constraints is less
than this number, the solution is found</dd>
<dt>show: bool</dt>
<dd>If True the plot of the resulting image is shown when the solution has been found or the maximum
number of iterations have been reached</dd>
<dt>initial: ndarray</dt>
<dd>Initial condition from which the difference map starts from.
Default is None, and then the initial object is filled with random numbers</dd>
<dt>zeroLimit: float</dt>
<dd>If the maximum value in the image is less than this number, the algorithm stops.
The image is taken to consist of only zeros.
An object consisting of only zeros will in many cases satisfy all the constraint and it is a trivial
solution which is normally is not of interest.
Hence, of the algorithm approaces this solution it can be of interest to just stop and pass another
initial condition.</dd>
<dt>Returns: dictionary</dt>
<dd><p class="first">Result dictionay having the keys
message - A message describing the reason for terminating</p>
<p>constrainedPower - the constrained power of the solution</p>
<p>error - array of the relative error on each iteration step</p>
<p>bestError - the minimum relative error</p>
<p class="last">status - True if the convergence criteria was reached, and False otherwise</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="missingData.MissingDataAnalyzer.step">
<code class="descname">step</code><span class="sig-paren">(</span><em>current</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#MissingDataAnalyzer.step"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.MissingDataAnalyzer.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate the solution one step</p>
<dl class="docutils">
<dt>current:</dt>
<dd>List of the duplicates of the current image</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="missingData.NormalizationConstraint">
<em class="property">class </em><code class="descclassname">missingData.</code><code class="descname">NormalizationConstraint</code><span class="sig-paren">(</span><em>missingData</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#NormalizationConstraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.NormalizationConstraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#missingData.Constraint" title="missingData.Constraint"><code class="xref py py-class docutils literal"><span class="pre">missingData.Constraint</span></code></a></p>
<dl class="method">
<dt id="missingData.NormalizationConstraint.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#NormalizationConstraint.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.NormalizationConstraint.apply" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="missingData.OrthogonalConstraint">
<em class="property">class </em><code class="descclassname">missingData.</code><code class="descname">OrthogonalConstraint</code><span class="sig-paren">(</span><em>missingData</em>, <em>orthogData</em>, <em>weight=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#OrthogonalConstraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.OrthogonalConstraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#missingData.Constraint" title="missingData.Constraint"><code class="xref py py-class docutils literal"><span class="pre">missingData.Constraint</span></code></a></p>
<p>Orthogonality constraint.
The image is forced to be orthogonal to this image</p>
<dl class="method">
<dt id="missingData.OrthogonalConstraint.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#OrthogonalConstraint.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.OrthogonalConstraint.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the ortogonal constraint.
The object is made orthogonal to the data by subtracting the projecting of the current solution
to the data array passed to this class.</p>
<dl class="docutils">
<dt>img: ndarray</dt>
<dd>Array of the current object</dd>
<dt>Returns: ndarray</dt>
<dd>The new object after it has been made orthogonal to the image passed to this object</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="missingData.RealSpaceConstraint">
<em class="property">class </em><code class="descclassname">missingData.</code><code class="descname">RealSpaceConstraint</code><span class="sig-paren">(</span><em>missingData</em>, <em>weight=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#RealSpaceConstraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.RealSpaceConstraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#missingData.Constraint" title="missingData.Constraint"><code class="xref py py-class docutils literal"><span class="pre">missingData.Constraint</span></code></a></p>
<p>Realspace constraint.
Voxels outside the support are set to zero and voxels inside the support
are left unchaged.</p>
<dl class="method">
<dt id="missingData.RealSpaceConstraint.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>img</em><span class="sig-paren">)</span><a class="reference internal" href="modules/missingData.html#RealSpaceConstraint.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#missingData.RealSpaceConstraint.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the realspace constraint. Voxels inside the support of the missingDataAnalyzer are left unchanged,
and voxels outisde are set to zero.</p>
<dl class="docutils">
<dt>img: ndarray</dt>
<dd>The object on which the constraint is applied</dd>
<dt>Returns: ndarray</dt>
<dd>The object after the constraint have been applied</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, David Kleiven.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="static/jquery.js"></script>
      <script type="text/javascript" src="static/underscore.js"></script>
      <script type="text/javascript" src="static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>